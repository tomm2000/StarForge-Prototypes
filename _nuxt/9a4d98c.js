(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{231:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,"a",(function(){return r}))},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(31),o=n(234);function c(e,t){if(t&&("object"===Object(r.a)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(o.a)(e)}},233:function(e,t,n){"use strict";function r(e,p){return r=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},r(e,p)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,"a",(function(){return o}))},234:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(54),n(39),n(55),n(26),n(34),n(56),n(57);var r=n(131),o=n(132),c=(n(19),n(279),n(42),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(43),n(66),n(228)),d=n(273);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f=function(){function e(t,n){var o=this;Object(r.a)(this,e),this.doUpdate=!1,this.drawObjects=new Set,this.canvas=document.getElementById(t),this.container=document.getElementById(n),this.scene=new c.q;var h=new c.e(16777215,.5);h.position.set(-400,400,-400),h.target.position.set(0,0,0),h.castShadow=!1,this.scene.add(h),(h=new c.e(16777215,.5)).position.set(400,-200,0),h.target.position.set(0,0,0),h.castShadow=!1,this.scene.add(h);var l=new c.h(1e3,10);this.scene.add(l),this.sizes={width:this.container.clientWidth,height:this.container.clientHeight},window.addEventListener("resize",(function(){o.container=document.getElementById("animation_container"),o.sizes.width=o.container.clientWidth,o.sizes.height=o.container.clientHeight,o.camera.aspect=o.sizes.width/o.sizes.height,o.camera.updateProjectionMatrix(),o.renderer.setSize(o.sizes.width,o.sizes.height),o.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))})),this.camera=new c.n(75,this.sizes.width/this.sizes.height),this.camera.position.set(0,100,200),this.scene.add(this.camera),this.controls=new d.a(this.camera,this.canvas),this.controls.enableDamping=!0,this.renderer=new c.x({canvas:this.canvas}),this.renderer.setSize(this.sizes.width,this.sizes.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(13421772,1),this.clock=new c.c}return Object(o.a)(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e);var n,r=h(t.drawObjects);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.update()}}catch(e){r.e(e)}finally{r.f()}this.controls.update(),t.renderer.render(t.scene,t.camera)}},{key:"initUpdate",value:function(){var e=this;this.doUpdate=!0,setInterval((function(){e.update(e)}),16)}},{key:"stopUpdate",value:function(){this.doUpdate=!1}},{key:"addObject",value:function(e){this.scene.add(e.get3D()),this.drawObjects.add(e)}},{key:"removeObject",value:function(e){this.drawObjects.delete(e),this.scene.remove(e.get3D())}}]),e}()},332:function(e,t,n){var content=n(375);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(100).default)("6c7dffe0",content,!0,{sourceMap:!1})},374:function(e,t,n){"use strict";n(332)},375:function(e,t,n){var r=n(99)(!1);r.push([e.i,"#main_container[data-v-d4a5afc6]{background-color:#3a3a98;height:100vh;width:100vw;padding:1rem;box-sizing:border-box}#home-link[data-v-d4a5afc6]{color:#fff;max-height:5%}#animation_container[data-v-d4a5afc6]{max-width:100%;max-height:95%;box-sizing:border-box}canvas[data-v-d4a5afc6]{width:100%;height:100%}",""]),e.exports=r},412:function(e,t,n){"use strict";n.r(t);var r=n(2),o=(n(19),n(236),n(131)),c=n(132),d=n(233),h=n(232),l=n(231),f=n(263),v=(n(66),n(177),n(278)),y=(n(33),n(270));function m(e,t){var n=new y.a;n.add(t,"reload"),n.add(t,"autoUpdate");var r=n.addFolder("planet data");r.add(e,"radius",1,200),r.add(e,"globalMinHeight",-1,1,.001),r.add(e,"seed",0,9999),r.add(t,"addNoiseLayer");var o=n.addFolder("noise layers");return o.add(e,"debugNoise"),e.noiseLayers.forEach((function(e,t){var n=o.addFolder("layer [".concat(t,"]"));n.add(e,"amplitude",-1,1,.001),n.add(e,"detail",1,8),n.add(e,"minHeight",-1,1,.001),n.add(e,"maskOnly"),n.add(e,"usePrevLayerAsMask"),n.add(e,"useFirstLayerAsMask"),n.add(e,"removeSelf")})),n}var w=n(228);function O(e){return e.clone().multiplyScalar(100)}var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;Object(o.a)(this,e),this.resolution=10,this.mesh=new w.k,this.material=new w.m,this.geometry=new w.i,this.positionFunction=n,this.resolution=t,this.mesh.geometry=this.geometry,this.mesh.material=this.material,this.generateNewMesh()}return Object(c.a)(e,[{key:"getResolution",value:function(){return this.resolution}},{key:"setResolution",value:function(e){this.resolution=e,this.generateNewMesh()}},{key:"getMaterial",value:function(){return this.material}},{key:"setMaterial",value:function(e){this.material=e}},{key:"getPointOnObject",value:function(e){return this.positionFunction(e)}},{key:"updateMesh",value:function(){for(var e=this.geometry.getAttribute("position"),i=0;i<e.array.length;i+=3){var t=performance.now(),n=(new w.w).fromArray(e.array,i).normalize();performance.now()-t,t=performance.now(),this.getPointOnObject(n).toArray(e.array,i),performance.now()-t}e.needsUpdate=!0,this.mesh.geometry=this.geometry;performance.now();this.mesh.geometry.computeVertexNormals()}},{key:"generateNewMesh",value:function(){this.geometry.dispose(),this.geometry=new w.i(1,this.resolution);for(var e=this.geometry.getAttribute("position"),i=0;i<e.array.length;i+=3){var t=(new w.w).fromArray(e.array,i);this.getPointOnObject(t.clone()).toArray(e.array,i)}this.mesh.geometry=this.geometry,this.mesh.geometry.computeVertexNormals()}},{key:"getMesh",value:function(){return this.mesh}},{key:"dispose",value:function(){}}]),e}(),j=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(o.a)(this,e),this.autoUpdate=!1;var r=Math.floor(9999*Math.random());this.tmpSeed=r,this.planetData={globalMinHeight:0,radius:n,seed:r,type:"terrestrial",noiseLayers:[],debugNoise:!1},this.gui=m(this.planetData,this),this.icoSphereMesh=new k(32,this.getPointOnPlanet.bind(this)),this.updateInterval=setInterval((function(){t.autoUpdate&&t.reload()}),32)}return Object(c.a)(e,[{key:"getPointOnPlanet",value:function(e){var data=this.planetData;if(this.tmpSeed!=data.seed){this.tmpSeed=data.seed;for(var i=0;i<data.noiseLayers.length;i++){data.noiseLayers[i];console.log("here!")}}for(var t=0,n=1,r=1,o=0;o<data.noiseLayers.length;o++){var c=data.noiseLayers[o],d=e.clone().multiplyScalar(c.detail),h=d.x,l=d.y,f=d.z,v=c.noise(h,l,f);v=(v+1)/2*c.amplitude,v=Math.max(0,v-(c.minHeight||0));var mask=1;c.useFirstLayerAsMask&&(mask=n),0==o&&(n=v),c.usePrevLayerAsMask&&o>=1&&(mask=r),c.maskOnly?(r=v*mask==0?0:.5,this.planetData.debugNoise&&(t+=v*mask==0?0:.5)):(r=v*mask,t+=v*mask)}return t=Math.max(0,t-(data.globalMinHeight||0)),e.multiplyScalar(data.radius*(t+1))}},{key:"reload",value:function(){this.icoSphereMesh.updateMesh()}},{key:"addNoiseLayer",value:function(){var e=this,t=this.planetData.noiseLayers.length;this.planetData.noiseLayers.push({noise:Object(v.makeNoise3D)(this.planetData.seed),removeSelf:function(){e.planetData.noiseLayers.splice(t,1),e.updateGUI()},amplitude:1,minHeight:0,useFirstLayerAsMask:!1,usePrevLayerAsMask:!1,maskOnly:!1,detail:1,index:t}),this.updateGUI()}},{key:"updateGUI",value:function(){this.gui.destroy(),this.gui=m(this.planetData,this)}},{key:"getMesh",value:function(){return this.icoSphereMesh.getMesh()}},{key:"dispose",value:function(){this.updateInterval&&clearInterval(this.updateInterval)}}]),e}();function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var x=function(e){Object(d.a)(n,e);var t=M(n);function n(e,r){var c;return Object(o.a)(this,n),(c=t.call(this,e,r)).planet=new j,c.init(),c}return Object(c.a)(n,[{key:"init",value:function(){this.scene.add(this.planet.getMesh())}},{key:"regenerateMeshes",value:function(){}},{key:"disposte",value:function(){this.planet.dispose()}}]),n}(f.a),_=r.a.extend({name:"IndexPage",data:function(){var data={canvas:void 0};return data},mounted:function(){this.canvas=new x("animation_canvas","animation_container"),this.canvas.initUpdate()},methods:{update:function(){var e;null===(e=this.canvas)||void 0===e||e.regenerateMeshes()}},destroyed:function(){var e;console.log("destroy"),null===(e=this.canvas)||void 0===e||e.disposte()}}),P=(n(374),n(41)),component=Object(P.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main_container"}},[n("router-link",{attrs:{id:"home-link",to:"/"}},[e._v("home")]),e._v(" "),n("button",{on:{click:e.update}},[e._v("update mesh")]),e._v(" "),e._m(0)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"animation_container"}},[t("canvas",{staticClass:"webgl",attrs:{id:"animation_canvas"}})])}],!1,null,"d4a5afc6",null);t.default=component.exports}}]);